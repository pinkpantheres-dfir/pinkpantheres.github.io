<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PinkPantheres Mascot Demo</title>
<style>
  :root{
    --hot-pink: #ff69b4;
    --rose-pink: #e9a4c6;
    --outline: #111;
    --rope-color: #7a5f5f;
  }
  /* container + placement */
  #panther-mascot {
    position: fixed;
    right: 24px;
    bottom: 16px;
    width: 120px;
    height: 320px;
    z-index: 9999;
    pointer-events: none;
    display: block;
    transform-origin: 50% 50%;
  }

  /* full-height rope */
  #panther-mascot .rope {
    position: fixed;
    right: 80px; /* rope slightly left of mascot */
    top: 0;
    bottom: 0;
    width: 6px;
    display: flex;
    justify-content: center;
    pointer-events: none;
    z-index: 9998;
  }
  /* rope visual using repeating linear-gradient to create pixel look */
  #panther-mascot .rope::before{
    content: "";
    width: 6px;
    height: 100%;
    background:
      linear-gradient(90deg, rgba(0,0,0,0.06) 0 10%, transparent 10% 100%),
      repeating-linear-gradient(to bottom, var(--rope-color) 0 6px, rgba(0,0,0,0.06) 6px 12px);
    border-left: 1px solid rgba(0,0,0,0.15);
    border-right: 1px solid rgba(255,255,255,0.03);
    animation: rope-sway 3s ease-in-out infinite;
    transform-origin: top center;
  }
  @keyframes rope-sway{
    0%{ transform: rotate(-1deg); }
    50%{ transform: rotate(1.2deg); }
    100%{ transform: rotate(-1deg); }
  }

  /* mascot box that travels up/down along the rope */
  #panther-mascot .mascot-wrap{
    position: absolute;
    right: 0;
    bottom: 20px;
    width: 120px;
    height: 120px;
    display:flex;
    align-items:center;
    justify-content:center;
    transform: translateY(0);
    transition: transform 220ms linear;
    will-change: transform;
  }

  /* basic sprite scale - makes it feel pixel-y */
  .pixelated { image-rendering: pixelated; image-rendering: crisp-edges; }

  /* climb animations: short movement to simulate climbing */
  .climb-up{
    animation: climb-up 0.25s steps(1) infinite;
  }
  .climb-down{
    animation: climb-down 0.25s steps(1) infinite;
  }
  @keyframes climb-up {
    0% { transform: translateY(6px) }
    50% { transform: translateY(-6px) }
    100% { transform: translateY(6px) }
  }
  @keyframes climb-down {
    0% { transform: translateY(-6px) }
    50% { transform: translateY(6px) }
    100% { transform: translateY(-6px) }
  }

  /* idle posture (magnifier lifted & look left) */
  .idle {
    animation: idle-loop 1s steps(1) infinite;
  }
  @keyframes idle-loop{
    0% { transform: translateY(0) }
    50% { transform: translateY(-2px) }
    100% { transform: translateY(0) }
  }

  /* transition classes for swapping internal poses */
  .pose-climb-up .frame-climb { display:block; }
  .pose-climb-up .frame-idle { display:none; }
  .pose-climb-down .frame-climb { display:block; }
  .pose-climb-down .frame-idle { display:none; }
  .pose-idle .frame-climb { display:none; }
  .pose-idle .frame-idle { display:block; }

  /* scale down on small screens and hide if too small */
  @media (max-width:720px){
    #panther-mascot { display:none; }
  }

  /* visuals for the demo (not required on site) */
  body { min-height:200vh; background: linear-gradient(#0f1724, #071024); color:#fff; font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial; }
  .demo-note { position:fixed; left:16px; top:16px; background:rgba(255,255,255,0.03); padding:10px 12px; border-radius:8px; font-size:13px; max-width:320px; line-height:1.25; }
  a { color:#ff9fc9; text-decoration:underline; }
  /* small shadow to pick mascot out */
  #panther-mascot svg { filter: drop-shadow(0 3px 6px rgba(0,0,0,0.45)); }
</style>
</head>
<body>

<link rel="stylesheet" href="/assets/css/pantheres.css">
<div id="pantheres-mascot" aria-hidden="true">
  <div class="pp-rope" role="presentation"></div>
  <div class="pp-wrap pose-idle" id="ppWrap">
    <img src="/assets/pantheres/idle.png" alt="" id="ppSprite" class="pp-sprite" />
    <img src="/assets/pantheres/glow_overlay.png" alt="" class="pp-glow" aria-hidden="true"/>
  </div>
</div>
<script src="/assets/js/pantheres.js" defer></script>

<div class="demo-note">
  PinkPantheres mascot demo. Scroll up/down to see the mascot climb the rope. Idle behavior triggers after 2s of no scroll. (Hide on mobile)
  <div style="margin-top:6px; font-size:12px; color:#ddd">Right side rope is fixed full-height.</div>
</div>

<!-- Rope element (full height on right) -->
<div id="panther-mascot">
  <div class="rope" aria-hidden="true"></div>

  <!-- mascot wrap: we will map translateY here programmatically to "climb" higher/lower -->
  <div class="mascot-wrap pose-idle" id="mascotWrap" aria-hidden="true">
    <!-- Inline SVG pixel-ish mascot -->
    <!-- We're using simple rectangles/circles to simulate a pixel aesthetic while allowing pose swapping -->
    <svg id="pantherSVG" width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" class="pixelated">
      <!-- group for climb frames (shown while climbing) -->
      <g class="frame-climb" transform="translate(0,0)">
        <!-- rope hook overlap (masking part) -->
        <!-- body -->
        <g transform="translate(10,20)">
          <!-- tail -->
          <path d="M5 50 q10 -20 20 -10" stroke="#000" stroke-width="2" fill="none" stroke-linecap="round" />
          <!-- legs (two rect-like legs) -->
          <rect x="48" y="56" width="10" height="14" rx="2" fill="#ff69b4" stroke="#111" stroke-width="1"/>
          <rect x="30" y="56" width="10" height="14" rx="2" fill="#ff69b4" stroke="#111" stroke-width="1"/>
          <!-- torso -->
          <ellipse cx="48" cy="36" rx="28" ry="20" fill="#ff69b4" stroke="#111" stroke-width="1"/>
          <!-- head -->
          <g transform="translate(32,6)">
            <ellipse cx="18" cy="12" rx="18" ry="14" fill="#ff69b4" stroke="#111" stroke-width="1"/>
            <!-- eyes with eyelashes -->
            <ellipse cx="12" cy="10" rx="3.5" ry="2.5" fill="#111" />
            <ellipse cx="24" cy="10" rx="3.5" ry="2.5" fill="#111" />
            <!-- eyelashes -->
            <path d="M9 7 l-4 -3" stroke="#111" stroke-width="1.2" stroke-linecap="round"/>
            <path d="M11 6 l-4 -3" stroke="#111" stroke-width="1.1" stroke-linecap="round"/>
            <path d="M22 7 l4 -3" stroke="#111" stroke-width="1.2" stroke-linecap="round"/>
            <path d="M25 6 l4 -3" stroke="#111" stroke-width="1.1" stroke-linecap="round"/>
            <!-- small bow centered on top -->
            <g transform="translate(7,-6)">
              <rect x="10" y="2" width="4" height="6" rx="1" fill="#fdd7e6" stroke="#d38cb3" stroke-width="0.6"/>
              <path d="M8 4 q-3 2 0 6 q3 -4 0 -6" fill="#ff69b4" stroke="#d38cb3" stroke-width="0.7"/>
              <path d="M22 4 q3 2 0 6 q-3 -4 0 -6" fill="#ff69b4" stroke="#d38cb3" stroke-width="0.7"/>
            </g>
            <!-- muzzle and nose -->
            <ellipse cx="18" cy="16" rx="8" ry="5" fill="#fbe9f2" stroke="#111" stroke-width="0.6"/>
            <circle cx="18" cy="14" r="1.6" fill="#111"/>
            <!-- magnifying glass (held low while climbing) -->
            <g transform="translate(34,24) rotate(12)">
              <circle cx="6" cy="6" r="6" fill="#ffffff55" stroke="#d1d9ff" stroke-width="1"/>
              <rect x="11" y="11" width="6" height="2" rx="1" fill="#111" />
            </g>
          </g>
        </g>
      </g>

      <!-- idle frame: magnifier lifted + look left, bow moves slightly -->
      <g class="frame-idle" style="display:none" transform="translate(0,0)">
        <g transform="translate(10,20)">
          <path d="M5 50 q10 -20 20 -10" stroke="#000" stroke-width="2" fill="none" />
          <rect x="48" y="56" width="10" height="14" rx="2" fill="#ff69b4" stroke="#111" stroke-width="1"/>
          <rect x="30" y="56" width="10" height="14" rx="2" fill="#ff69b4" stroke="#111" stroke-width="1"/>
          <ellipse cx="48" cy="36" rx="28" ry="20" fill="#ff69b4" stroke="#111" stroke-width="1"/>
          <g transform="translate(32,6)">
            <!-- head turned slightly left (by shifting elements) -->
            <ellipse cx="16" cy="12" rx="18" ry="14" fill="#ff69b4" stroke="#111" stroke-width="1"/>
            <ellipse cx="10" cy="11" rx="3.5" ry="2.5" fill="#111" />
            <ellipse cx="20" cy="10" rx="2.2" ry="1.8" fill="#111" />
            <!-- eyelashes on main eye -->
            <path d="M7 8 l-4 -3" stroke="#111" stroke-width="1.2" stroke-linecap="round"/>
            <path d="M9 7 l-4 -2.8" stroke="#111" stroke-width="1.1" stroke-linecap="round"/>
            <!-- bow centered, animated by CSS later -->
            <g id="idle-bow" transform="translate(7,-5)">
              <rect x="10" y="2" width="4" height="6" rx="1" fill="#fdd7e6" stroke="#d38cb3" stroke-width="0.6"/>
              <path d="M8 4 q-3 2 0 6 q3 -4 0 -6" fill="#ff69b4" stroke="#d38cb3" stroke-width="0.7"/>
              <path d="M22 4 q3 2 0 6 q-3 -4 0 -6" fill="#ff69b4" stroke="#d38cb3" stroke-width="0.7"/>
            </g>
            <!-- raised magnifier close to face (pixel shine) -->
            <g transform="translate(6,12) rotate(-12)">
              <circle cx="6" cy="6" r="7" fill="#ffffff88" stroke="#cfe0ff" stroke-width="1"/>
              <rect x="12" y="11" width="6" height="2" rx="1" fill="#111" />
              <!-- glint -->
              <rect x="2" y="2" width="2" height="1" fill="#fff" opacity="0.9" />
            </g>
          </g>
        </g>
      </g>
    </svg>
  </div>
</div>

<script>
/*
  panther mascot script
  - detects scroll up / down
  - applies climb-up / climb-down classes to mascotWrap
  - maps cumulative scroll to vertical translation so mascot climbs the rope
  - idle detection: 2s -> apply idle pose (lift magnifier + look left)
*/

// config
const mascotWrap = document.getElementById('mascotWrap');
let lastScrollY = window.scrollY;
let lastDir = 0; // 1 up, -1 down
let idleTimer = null;
let currentYOffset = 0; // pixel offset along rope (higher = climbs up)
const MAX_OFFSET = window.innerHeight - 120; // stay within view
const MIN_OFFSET = 20;
const CLIMB_STEP = 12;

// helper to set pose classes
function setPose(pose) {
  mascotWrap.classList.remove('climb-up','climb-down','idle');
  mascotWrap.classList.remove('pose-idle','pose-climb-up','pose-climb-down');
  if(pose === 'up') {
    mascotWrap.classList.add('climb-up','pose-climb-up');
  } else if(pose === 'down') {
    mascotWrap.classList.add('climb-down','pose-climb-down');
  } else {
    mascotWrap.classList.add('idle','pose-idle');
  }
}

function clearIdleTimer(){
  if(idleTimer) { clearTimeout(idleTimer); idleTimer = null; }
}

// initial idle pose
setPose('idle');

function onIdleTrigger(){
  setPose('idle');
  // ensure idle state sprites show (frame-idle)
  // no extra action needed; CSS handles display
}

function onScroll(e){
  const y = window.scrollY;
  const dy = y - lastScrollY;
  // determine direction: negative dy = scrolled up -> climb up
  let dir = 0;
  if(Math.abs(dy) > 2){
    dir = dy < 0 ? 1 : -1;
  }
  if(dir === 1){
    // climb up
    setPose('up');
    // move up
    currentYOffset = Math.min(MAX_OFFSET, currentYOffset + CLIMB_STEP);
  } else if(dir === -1) {
    setPose('down');
    currentYOffset = Math.max(MIN_OFFSET, currentYOffset - CLIMB_STEP);
  }
  // translate mascotWrap along negative Y (higher offset = translateY negative)
  // we invert because bottom is baseline
  const translateY = -currentYOffset;
  mascotWrap.style.transform = `translateY(${translateY}px)`;

  // reset idle timer to trigger after 2s
  clearIdleTimer();
  idleTimer = setTimeout(onIdleTrigger, 2000);

  lastScrollY = y;
  lastDir = dir;
}

// also map wheel events for better responsiveness
window.addEventListener('scroll', onScroll, {passive:true});
window.addEventListener('wheel', function(e){
  // wheel gives better immediacy on many devices
  // no need to compute delta here because scroll event handles position cumulatively
}, {passive:true});

// when resizing, recompute MAX_OFFSET
window.addEventListener('resize', function(){
  // safe clamp
  const newMax = window.innerHeight - 120;
  if(currentYOffset > newMax) currentYOffset = newMax;
});

// accessibility: hide mascot if user prefers reduced motion
const mq = window.matchMedia("(prefers-reduced-motion: reduce)");
if(mq && mq.matches){
  document.getElementById('panther-mascot').style.display = 'none';
}

/* small polish: when idle, animate bow sway (CSS via transform) */
const idleBow = document.getElementById('idle-bow');
if(idleBow){
  idleBow.style.transformOrigin = 'center';
  idleBow.style.transition = 'transform 0.45s ease-in-out';
  // simple sway loop during idle
  setInterval(()=>{
    if(mascotWrap.classList.contains('idle')){
      idleBow.style.transform = 'rotate(-8deg)';
      setTimeout(()=> idleBow.style.transform = 'rotate(6deg)', 450);
    } else {
      idleBow.style.transform = 'rotate(0deg)';
    }
  }, 900);
}
</script>
  <link rel="stylesheet" href="/assets/css/pantheres.css">
<div id="pantheres-mascot" aria-hidden="true">
  <div class="pp-rope" role="presentation"></div>
  <div class="pp-wrap pose-idle" id="ppWrap">
    <img src="/assets/pantheres/idle.png" alt="" id="ppSprite" class="pp-sprite" />
    <img src="/assets/pantheres/glow_overlay.png" alt="" class="pp-glow" aria-hidden="true"/>
  </div>
</div>
<script src="/assets/js/pantheres.js" defer></script>

</body>
</html>
